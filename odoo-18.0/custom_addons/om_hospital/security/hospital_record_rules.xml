<odoo>
    <!-- Doctor: can only see their own appointments -->
    <record id="rule_doctor_see_own_appointments" model="ir.rule">
        <field name="name">Doctor can only see own appointments</field>
        <field name="model_id" ref="model_hospital_appointment"/>
        <field name="groups" eval="[(4, ref('om_hospital.group_hospital_doctor'))]"/>
        <field name="domain_force">[('doctor_ids.user_id', '=', user.id)]</field>
    </record>


    <!-- Doctor: can only see patients linked to their appointments -->
    <record id="rule_doctor_see_own_patients" model="ir.rule">
        <field name="name">Doctor can only see own patients</field>
        <field name="model_id" ref="model_hospital_patient"/>
        <field name="groups" eval="[(4, ref('om_hospital.group_hospital_doctor'))]"/>
        <field name="domain_force">[('appointment_ids.doctor_ids.user_id', '=', user.id)]</field>
    </record>


    <!-- Patient: can only see self -->
    <record id="rule_patient_see_self" model="ir.rule">
        <field name="name">Patient can only see their own record</field>
        <field name="model_id" ref="model_hospital_patient"/>
        <field name="groups" eval="[(4, ref('om_hospital.group_hospital_patient'))]"/>
        <field name="domain_force">[('user_id', '=', user.id)]</field>
    </record>

    <!-- Patient: can only see their own appointments -->
    <record id="rule_patient_see_own_appointments" model="ir.rule">
        <field name="name">Patient can only see their own appointments</field>
        <field name="model_id" ref="model_hospital_appointment"/>
        <field name="groups" eval="[(4, ref('om_hospital.group_hospital_patient'))]"/>
        <field name="domain_force">[('patient_id.user_id', '=', user.id)]</field>
    </record>

    <!-- Receptionist: can see everything -->
    <record id="rule_receptionist_all_patients" model="ir.rule">
        <field name="name">Receptionist can see all patients</field>
        <field name="model_id" ref="model_hospital_patient"/>
        <field name="groups" eval="[(4, ref('om_hospital.group_hospital_receptionist'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>

    <record id="rule_receptionist_all_appointments" model="ir.rule">
        <field name="name">Receptionist can see all appointments</field>
        <field name="model_id" ref="model_hospital_appointment"/>
        <field name="groups" eval="[(4, ref('om_hospital.group_hospital_receptionist'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>
</odoo>
